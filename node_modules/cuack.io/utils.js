/**
 * @overview 
 * @author Daniel Goberitz <dalgo86@gmail.com>
 */
var merge;
module.exports.merge = merge = function(){
	var	i = 0,
		prop
	;
	for(i=1;i<arguments.length;i++){
		for(prop in arguments[i]){

			if( arguments[i].hasOwnProperty && arguments[i].hasOwnProperty(prop)){

				if(arguments[i][prop] instanceof Array){
					// copy the array content;
					arguments[0][prop] = merge([], arguments[i][prop]);

				}else if(arguments[i][prop] instanceof Object){

					if(arguments[i][prop].constructor === Object){

						// it's an instance of Object, probablly options o 
						// something like that, copy
						if(undefined === arguments[0][prop]){
							arguments[0][prop] = {};
						}

						arguments[0][prop] = merge(arguments[0][prop], arguments[i][prop]);
					}else{
						// it's an instance of some class, reference
						arguments[0][prop] = arguments[i][prop];
					}
				}else{
					// reference
					arguments[0][prop] = arguments[i][prop];
				}
			}
		}
	}

	return arguments[0];
}